<template>
    <div class="container">
        <nav class="navbar">
            <button v-for="(category, index) in emojiCategories" :key="index" @click="selectCategory(category.name)"
                :class="{ active: selectedCategory === category.name }" class="nav-item">
                <span class="nav-icon">{{ category.icon }}</span>
            </button>
        </nav>
        <div class="emoji-container">
            <div class="search-container">
                <input v-model="searchQuery" placeholder="Search emoji..." class="search-input" @input="filterEmojis" />
            </div>
            <div class="category">
                <h2 v-if="!selectedCategory" class="category-title">All Emojis</h2>
                <h2 v-else class="category-title">{{ selectedCategory }}</h2>
                <div class="emoji-grid">
                    <span v-for="(emoji, emojiIndex) in filteredEmojis" :key="emojiIndex" class="emoji-item"
                        @click="toggleSelection(emoji)" :class="{ selected: selectedEmojis.includes(emoji) }">
                        {{ emoji }}
                    </span>
                </div>
            </div>
            <div class="footer">
                <span class="selected-text">Selected emoji: {{ selectedEmojis.join(' ') }}</span>
                <button @click="copySelected" class="copy-button">COPY</button>
                <button @click="clearSelection" class="clear-button">CLEAR</button>
            </div>
        </div>
    </div>
</template>

<script setup>
import { ref, computed } from 'vue'

const selectedCategory = ref(null)
const searchQuery = ref('')
const selectedEmojis = ref([])

const emojiCategories = ref([
    { name: "Smileys", icon: "😊", emojis: ["😀", "😁", "😂", "🤣", "😃", "😄", "😅", "😆", "😉", "😊", "😋", "😎", "😍", "🥰", "😘", "😗", "😙", "😚", "☺️", "🙂", "🤗", "🤩", "🤔", "🤨", "😐", "😑", "😶", "🙄", "😏", "😣", "😥", "😮", "🤐", "😯", "😪", "😫", "😴", "😷", "🤒", "🤕", "🤢", "🤮", "🤧", "🥵", "🥶", "🥴", "😵", "🤯", "🤠", "🥳", "😈", "👿", "💀", "☠️", "👻", "👽", "👾", "🤖"] },
    { name: "Gestures & People", icon: "👋", emojis: ["👋", "🤚", "🖐️", "✋", "🖖", "👌", "🤌", "🤏", "✌️", "🤞", "🤟", "🤘", "🤙", "👈", "👉", "👆", "🖕", "👇", "☝️", "👍", "👎", "✊", "👊", "🤛", "🤜", "👏", "🙌", "👐", "🤲", "🙏", "✍️", "💅", "🤳", "💪", "🦵", "🦶", "👂", "🦻", "👃", "🧠", "🦷", "🦴", "👀", "👁️", "👅", "👄", "👶", "🧒", "👦", "👧", "🧑", "👨", "🧔", "👩", "🧓", "👴", "👵"] },
    { name: "Hearts, Clothes & Activities", icon: "❤️", emojis: ["❤️", "🧡", "💛", "💚", "💙", "💜", "🖤", "🤍", "🤎", "💔", "❣️", "💕", "💞", "💓", "💗", "💖", "💘", "💝", "🎀", "👑", "👒", "🎓", "🧢", "⛑️", "🎩", "👓", "🕶️", "🥽", "🥼", "🧳", "👔", "👕", "👖", "🧣", "🧤", "🧥", "🧦", "👗", "👘", "🥻", "👙", "👚", "👛", "👜", "👝", "🎒", "👞", "👟", "🥾", "🥿", "👠", "👡", "🩰", "👢", "🎤", "🎧", "🎼", "🎹", "🥁", "🎷", "🎺", "🎸", "🪕", "🎻"] },
    { name: "Foods & Drinks", icon: "🍎", emojis: ["🍎", "🍏", "🍐", "🍊", "🍋", "🍌", "🍉", "🍇", "🍓", "🫐", "🍈", "🍒", "🍑", "🥭", "🍍", "🥥", "🥝", "🍅", "🍆", "🥑", "🥦", "🥬", "🥒", "🌽", "🥕", "🧄", "🧅", "🍄", "🥜", "🌰", "🍞", "🥐", "🥖", "🥨", "🥯", "🥞", "🧀", "🍖", "🍗", "🥩", "🥓", "🍔", "🍟", "🍕", "🌭", "🥪", "🌮", "🌯", "🥙", "🧆", "🥚", "🍳", "🥘", "🍲", "🥣", "🥗", "🍿", "🧈", "🧂", "🍱", "🍘", "🍙", "🍚", "🍛", "🍜", "🍝", "🍠", "🍢", "🍣", "🍤", "🍥", "🥮", "🍡", "🥟", "🥠", "🥡", "🍦", "🍧", "🍨", "🍩", "🍪", "🎂", "🍰", "🧁", "🥧", "🍫", "🍬", "🍭", "🍮", "🍯", "🍼", "🥛", "☕", "🍵", "🍶", "🍾", "🍷", "🍸", "🍹", "🍺", "🍻", "🥂", "🥃", "🥤", "🧃", "🧉"] },
    { name: "Animals", icon: "🐶", emojis: ["🐶", "🐱", "🐭", "🐹", "🐰", "🦊", "🐻", "🐼", "🐨", "🐯", "🦁", "🐮", "🐷", "🐽", "🐸", "🐵", "🙈", "🙉", "🙊", "🐒", "🦍", "🦧", "🐔", "🐧", "🐦", "🐤", "🐣", "🐥", "🦆", "🦅", "🦉", "🦇", "🐺", "🐗", "🐴", "🦄", "🐝", "🪰", "🐞", "🦋", "🐌", "🐛", "🐜", "🦗", "🕷️", "🕸️", "🦂", "🦟", "🦀", "🦞", "🦐", "🦑", "🐙", "🐚", "🐠", "🐟", "🐬", "🐳", "🐋", "🦈", "🐊", "🐍", "🐢", "🦎", "🦖", "🦕", "🐘", "🦒", "🦘", "🦬", "🦏", "🦛", "🐪", "🦙", "🐄", "🐂", "🐃", "🐎", "🐖", "🐏", "🐑", "🦌", "🐕", "🐩", "🦮", "🐕‍🦺", "🐈", "🐈‍⬛", "🪶", "🦩", "🦜", "🦚", "🦢"] },
    { name: "Plants, Nature & Weather", icon: "🌱", emojis: ["🌱", "🪴", "🌿", "☘️", "🍀", "🍁", "🍂", "🍃", "🌾", "🌻", "🌼", "🌷", "🌹", "🥀", "🌺", "🌸", "💐", "🌲", "🌳", "🌴", "🌵", "🌍", "🌎", "🌏", "🌕", "🌖", "🌗", "🌘", "🌙", "🌚", "🌛", "🌜", "🌝", "☀️", "🌞", "⭐", "🌟", "✨", "⚡", "🔥", "💥", "🌈", "☁️", "⛅", "🌤️", "🌥️", "🌦️", "🌧️", "⛈️", "🌩️", "🌨️", "❄️", "☃️", "⛄", "🌬️", "💨", "🌪️", "🌫️", "💧", "💦", "☔", "☂️", "🌊", "🪸", "🪨", "🪵"] },
    { name: "Travel, Places & Buildings", icon: "🚗", emojis: ["🚗", "🚕", "🚙", "🚌", "🚎", "🏎️", "🚓", "🚑", "🚒", "🚐", "🚚", "🚛", "🚜", "🛵", "🏍️", "🚲", "🛴", "🛹", "🛼", "🚂", "🚃", "🚄", "🚅", "🚆", "🚇", "🚈", "🚉", "🚊", "🚝", "🚞", "✈️", "🛫", "🛬", "🛩️", "💺", "🚁", "🛸", "🚀", "�satellite️", "⛵", "🛶", "🚤", "⛴️", "🛳️", "🚢", "⚓", "⛽", "🚨", "🚥", "🚦", "🛑", "🚧", "🏁", "🗺️", "🗾", "🗽", "🗼", "🏰", "🏯", "🏟️", "🎡", "🎢", "🎠", "⛲", "⛺", "🏕️", "🏖️", "🏜️", "🏝️", "🏞️", "🏟️", "🏛️", "🏠", "🏡", "🏢", "🏣", "🏤", "🏥", "🏦", "🏨", "🏩", "🏪", "🏫", "🏬", "🏭", "🏯", "🏰", "💒", "🗼", "🗽", "⛪", "🕌", "🛕", "🕍", "⛩️", "🕋"] },
    { name: "Objects", icon: "⌚", emojis: ["⌚", "📱", "📲", "💻", "⌨️", "🖥️", "🖨️", "🖱️", "🖲️", "🕹️", "🗜️", "💽", "💾", "💿", "📀", "📼", "📷", "📸", "📹", "🎥", "📽️", "🎞️", "📞", "☎️", "📟", "📠", "📺", "📻", "🎙️", "🎚️", "🎛️", "🧭", "⏱️", "⏲️", "⏰", "🕰️", "⌛", "⏳", "💡", "🔦", "🕯️", "🪔", "💣", "🧨", "🔫", "🪃", "🏹", "🛡️", "🔧", "🔨", "⚒️", "🛠️", "⛏️", "🔩", "⚙️", "🪚", "🔗", "⛓️", "🪝", "🧰", "🧲", "🪜", "⚗️", "🧪", "🧫", "🧬", "🔬", "🔭", "📡", "💉", "🩺", "🚪", "🛋️", "🛏️", "🛁", "🪑", "🚽", "🚿", "🛁", "🪒", "🧴", "🧷", "🧹", "🧺", "🧻", "🧼", "🧽", "🪣", "🪥", "🧯", "🛒", "🚬", "⚰️", "⚱️", "🗿", "🪦", "🪧"] },
    { name: "Symbols", icon: "💯", emojis: ["💯", "🔢", "🔣", "🔤", "🅰️", "🅱️", "🆎", "🅾️", "🆑", "🆒", "🆓", "🆔", "🆕", "🆖", "🆗", "🆘", "🆙", "🆚", "🈁", "🈂️", "🈚", "🈯", "🈲", "🈳", "🈴", "🈵", "🈶", "🈷️", "🈸", "🈹", "🈺", "🉐", "🉑", "㊗️", "㊙️", "🈴", "🈵", "🈶", "🈷️", "🈸", "🈹", "🈺", "🉐", "🉑", "🅿️", "🚳", "🚯", "🚱", "🚷", "🚸", "⛔", "📵", "🚫", "🚭", "🚮", "🚾", "🛂", "🛃", "🛄", "🛅", "⚠️", "🚸", "🔴", "🟠", "🟡", "🟢", "🔵", "🟣", "⚫", "⚪", "🟤", "🔺", "🔻", "🔼", "🔽", "⬆️", "⬇️", "⬅️", "➡️", "↖️", "↗️", "↘️", "↙️", "↕️", "↔️", "↩️", "↪️", "⤴️", "⤵️", "🔀", "🔁", "🔂", "🔄", "🔃", "🎦", "📶", "📳", "📴", "♀️", "♂️", "⚧️", "✖️", "➕", "➖", "➗", "♾️", "‼️", "⁉️", "❓", "❔", "❕", "❗", "〰️", "💱", "💲", "⚕️", "♻️", "⚜️", "🔱", "📛", "🔰", "⭕", "✅", "❎", "🌐", "💠", "Ⓜ️", "🌀", "💤", "🏧", "♿", "🚻", "🚼", "🚾", "🛗", "🈳", "🈲", "🈯", "🈚", "🈴", "🈵", "🈶", "🈷️", "🈸", "🈹", "🈺", "🉐", "🉑"] },
    { name: "Flags", icon: "🏁", emojis: ["🏁", "🚩", "🎌", "🇦🇨", "🇦🇩", "🇦🇪", "🇦🇫", "🇦🇬", "🇦🇮", "🇦🇱", "🇦🇲", "🇦🇴", "🇦🇶", "🇦🇷", "🇦🇸", "🇦🇹", "🇦🇺", "🇦🇼", "🇦🇽", "🇦🇿", "🇧🇦", "🇧🇧", "🇧🇩", "🇧🇪", "🇧🇫", "🇧🇬", "🇧🇭", "🇧🇮", "🇧🇯", "🇧🇱", "🇧🇲", "🇧🇳", "🇧🇴", "🇧🇶", "🇧🇷", "🇧🇸", "🇧🇹", "🇧🇻", "🇧🇼", "🇧🇾", "🇧🇿", "🇨🇦", "🇨🇨", "🇨🇩", "🇨🇫", "🇨🇬", "🇨🇭", "🇨🇮", "🇨🇰", "🇨🇱", "🇨🇲", "🇨🇳", "🇨🇴", "🇨🇵", "🇨🇷", "🇨🇺", "🇨🇻", "🇨🇼", "🇨🇽", "🇨🇾", "🇨🇿", "🇩🇪", "🇩🇬", "🇩🇯", "🇩🇰", "🇩🇲", "🇩🇴", "🇩🇿", "🇪🇦", "🇪🇨", "🇪🇪", "🇪🇬", "🇪🇭", "🇪🇷", "🇪🇸", "🇪🇹", "🇪🇺", "🇫🇮", "🇫🇯", "🇫🇰", "🇫🇴", "🇫🇷", "🇬🇦", "🇬🇧", "🇬🇩", "🇬🇪", "🇬🇫", "🇬🇬", "🇬🇭", "🇬🇮", "🇬🇱", "🇬🇲", "🇬🇳", "🇬🇵", "🇬🇶", "🇬🇷", "🇬🇸", "🇬🇹", "🇬🇺", "🇬🇼", "🇬🇾", "🇭🇰", "🇭🇲", "🇭🇳", "🇭🇷", "🇭🇹", "🇭🇺", "🇮🇨", "🇮🇩", "🇮🇪", "🇮🇱", "🇮🇲", "🇮🇳", "🇮🇴", "🇮🇶", "🇮🇷", "🇮🇸", "🇮🇹", "🇯🇪", "🇯🇲", "🇯🇴", "🇯🇵", "🇰🇪", "🇰🇬", "🇰🇭", "🇰🇮", "🇰🇲", "🇰🇳", "🇰🇵", "🇰🇷", "🇽🇰", "🇰🇼", "🇰🇾", "🇰🇿", "🇱🇦", "🇱🇧", "🇱🇨", "🇱🇮", "🇱🇰", "🇱🇷", "🇱🇸", "🇱🇹", "🇱🇺", "🇱🇻", "🇱🇾", "🇲🇦", "🇲🇨", "🇲🇩", "🇲🇪", "🇲🇫", "🇲🇬", "🇲🇭", "🇲🇰", "🇲🇱", "🇲🇲", "🇲🇳", "🇲🇴", "🇲🇵", "🇲🇶", "🇲🇷", "🇲🇸", "🇲🇹", "🇲🇺", "🇲🇻", "🇲🇼", "🇲🇽", "🇲🇾", "🇲🇿", "🇳🇦", "🇳🇨", "🇳🇪", "🇳🇫", "🇳🇬", "🇳🇮", "🇳🇱", "🇳🇴", "🇳🇵", "🇳🇷", "🇳🇺", "🇳🇿", "🇴🇲", "🇵🇦", "🇵🇪", "🇵🇫", "🇵🇬", "🇵🇭", "🇵🇰", "🇵🇱", "🇵🇲", "🇵🇳", "🇵🇷", "🇵🇸", "🇵🇹", "🇵🇼", "🇵🇾", "🇶🇦", "🇷🇪", "🇷🇴", "🇷🇸", "🇷🇺", "🇷🇼", "🇸🇦", "🇸🇧", "🇸🇨", "🇸🇩", "🇸🇪", "🇸🇬", "🇸🇭", "🇸🇮", "🇸🇯", "🇸🇰", "🇸🇱", "🇸🇲", "🇸🇳", "🇸🇴", "🇸🇷", "🇸🇸", "🇸🇹", "🇸🇻", "🇸🇽", "🇸🇾", "🇸🇿", "🇹🇦", "🇹🇨", "🇹🇩", "🇹🇫", "🇹🇬", "🇹🇭", "🇹🇯", "🇹🇰", "🇹🇱", "🇹🇲", "🇹🇳", "🇹🇴", "🇹🇷", "🇹🇹", "🇹🇻", "🇹🇼", "🇹🇿", "🇺🇦", "🇺🇬", "🇺🇲", "🇺🇳", "🇺🇸", "🇺🇾", "🇺🇿", "🇻🇦", "🇻🇨", "🇻🇪", "🇻🇬", "🇻🇮", "🇻🇳", "🇻🇺", "🇼🇫", "🇼🇸", "🇽🇰", "🇾🇪", "🇾🇹", "🇿🇦", "🇿🇲", "🇿🇼", "🏴󠁧󠁢󠁥󠁮󠁧󠁿", "🏴󠁧󠁢󠁳󠁣󠁴󠁿", "🏴󠁧󠁢󠁷󠁬󠁳󠁿"] }
])

const allEmojis = computed(() => {
    if (!selectedCategory.value) {
        return emojiCategories.value.flatMap(cat => cat.emojis)
    }
    const category = emojiCategories.value.find(cat => cat.name === selectedCategory.value)
    return category ? category.emojis : []
})

const filteredEmojis = computed(() => {
    if (!searchQuery.value.trim()) return allEmojis.value
    const query = searchQuery.value.toLowerCase()
    return allEmojis.value.filter(emoji => emoji.toLowerCase().includes(query))
})

const selectCategory = (categoryName) => {
    selectedCategory.value = categoryName
}

const toggleSelection = (emoji) => {
    if (selectedEmojis.value.includes(emoji)) {
        selectedEmojis.value = selectedEmojis.value.filter(e => e !== emoji)
    } else {
        selectedEmojis.value.push(emoji)
    }
}

const copySelected = () => {
    if (selectedEmojis.value.length > 0) {
        navigator.clipboard.writeText(selectedEmojis.value.join(''))
    }
}

const clearSelection = () => {
    selectedEmojis.value = []
}
</script>

<style scoped>
.container {
    @apply flex p-4 max-w-full mx-auto bg-gray-100;
}

.navbar {
    @apply bg-gray-200 p-2 rounded-l-md h-auto w-16 flex-col space-y-2;
}

.nav-item {
    @apply px-3 py-1 rounded text-gray-700 hover:bg-gray-300 w-full flex justify-center;
}

.nav-item.active {
    @apply bg-gray-400 text-black;
}

.nav-icon {
    @apply text-xl;
}

.emoji-container {
    @apply flex-1 p-2 bg-white rounded-r-md ml-2;
}

.search-container {
    @apply mb-4 bg-white p-2 rounded-t-md;
}

.search-input {
    @apply w-full p-2 border-none focus:outline-none text-gray-700;
}

.category {
    @apply border-t pt-2;
}

.category-title {
    @apply text-sm font-semibold text-gray-700 mb-1;
}

.emoji-grid {
    @apply grid grid-cols-12 gap-1;
}

.emoji-item {
    @apply text-xl cursor-pointer p-1 rounded hover:bg-gray-200 text-center;
}

.emoji-item.selected {
    @apply bg-blue-200;
}

.footer {
    @apply flex justify-between items-center p-2 bg-blue-800 text-white rounded-md mt-2;
}

.selected-text {
    @apply text-sm;
}

.copy-button {
    @apply bg-blue-600 px-3 py-1 rounded hover:bg-blue-700 text-white text-sm;
}

.clear-button {
    @apply bg-red-600 px-3 py-1 rounded hover:bg-red-700 text-white text-sm;
}
</style>